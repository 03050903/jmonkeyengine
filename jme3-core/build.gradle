if (!hasProperty('mainClass')) {
    ext.mainClass = ''
}

sourceSets {
    main {
        java {
            srcDir 'src/main/java'
            srcDir 'src/plugins/java'
            srcDir 'src/tools/java'
        }
    }
    test {
        java {
            srcDir 'src/test/java'
            srcDir 'src/plugins/java'
        }
    }
}

configurations {
    testOutput.extendsFrom testCompile
}

task testJar(type: Jar) {
    classifier "test"
    from sourceSets.test.output
}

artifacts {
    testOutput testJar
}

task updateVersionPropertiesFile << {
    def verfile = file('src/main/resources/com/jme3/system/version.properties')
    verfile.text = "# THIS IS AN AUTO-GENERATED FILE..\n" +
                   "# DO NOT MODIFY!\n" + 
                   "build.date=${releaseInfo.buildDate}\n" +
                   "git.revision=${releaseInfo.revision}\n" +
                   "git.branch=${releaseInfo.branch}\n" +
                   "git.hash=${releaseInfo.hash}\n" +
                   "git.hash.short=${releaseInfo.shortHash}\n" +
                   "git.tag=${releaseInfo.tag}\n" +
                   "name.full=jMonkeyEngine ${releaseInfo.fullVersion}\n" +
                   "version.full=${releaseInfo.fullVersion}\n" +
                   "version.number=${releaseInfo.version}\n"
}

compileJava.dependsOn(updateVersionPropertiesFile)

